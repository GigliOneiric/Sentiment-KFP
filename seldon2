apiVersion: machinelearning.seldon.io/v1
kind: SeldonDeployment
metadata:
  labels:
    app: seldon
  name: seldon-sentiment2
  namespace: kubeflow-user-example-com
spec:
  annotations:
    project_name: NLP Pipeline
    deployment_version: v1
  name: seldon-sentiment
  predictors:
    - componentSpecs:
        - spec:
            containers:
              - image: localhost:5000/seldon-sentiment:0.1
                imagePullPolicy: IfNotPresent
                name: sentiment
                livenessProbe:
                  initialDelaySeconds: 80
                  failureThreshold: 200
                  periodSeconds: 5
                  successThreshold: 1
                  httpGet:
                    path: /health/ping
                    port: http
                    scheme: HTTP
                readinessProbe:
                  initialDelaySeconds: 80
                  failureThreshold: 200
                  periodSeconds: 5
                  successThreshold: 1
                  httpGet:
                    path: /health/ping
                    port: http
                    scheme: HTTP
                resources:
                  requests:
                    memory: 1Mi
            command: [ "/bin/bash", "-c", "--" ]
            args: [ "while true; do sleep 30; done;" ]        
            terminationGracePeriodSeconds: 20
      graph:
        children: []
        endpoint:
          type: REST
        name: sentiment
        type: MODEL
      name: sentiment
      replicas: 1
      annotations:
        predictor_version: v1
